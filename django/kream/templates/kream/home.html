{% extends "base.html" %}
{% load static %}
{% block content %}

  <body class="nav-fixed bg-light">
    <!-- Top app bar navigation menu-->
    {% include "header.html" %}
    <!-- Layout wrapper-->
    <div id="layoutDrawer">
      <!-- Layout navigation-->
      <div id="layoutDrawer_nav">
        <!-- Drawer navigation-->
        {% include "sidebar.html" %}
      </div>
      <!-- Layout content-->
      <div id="layoutDrawer_content">
        <!-- Main page content-->
        <main>
          <div class="container-xl p-5">
            <div class="row gx-5">
              <div class="col-lg-5 col-md-6 mb-5">
                <div class="card card-raised border-top border-4 border-primary h-100">
                  <div class="card-body p-5">
                    <div class="overline text-muted mb-4">Company Inc.</div>
                    <h1>안녕하세요
                      {{user.username}}님
                    </h1>
                    <p class="card-text mb-4">거래된 데이터의 매출액 정보입니다</p>
                    <table class="table table-sm mb-0">
                      <tbody>
                        <tr class="py-2">                       
                          <td class="h6">총 매출액</td> 
                          <td class="h6">
                            <div class="text-success fw-500">{{total_sales}}원</div>
                          </td>
                        </tr>
                        
                        <tr class="py-2">  
                          <td class="h6">지난해 대비 매출액 증감비율</td>
                          <td class="h6">
                            <div class="text-success fw-500" id="input"></div>
                          </td>
                        </tr>
                        
                        <tr class="py-2">  
                          <td class="h6">{{latest_month}}월 매출 비교: 2024년 vs 2023년</td>
                          <td class="h6">
                            <div class="text-success fw-500" id="input2"></div>
                          </td>
                        </tr>
                        
                        <tr class="py-2">  
                          <td class="h6">3분기 매출액</td>
                          <td class="h6">
                            <div class="text-success fw-500" id="input3"></div>
                          </td>
                        </tr>

                      </tbody>
                    </table>
                  </div>
                  <div class="card-footer bg-transparent position-relative ripple-gray">
                    <a class="d-flex align-items-center justify-content-end text-decoration-none stretched-link text-primary" href="#!">
                      <div class="fst-button">View More</div>
                      <i class="material-icons icon-sm ms-1">chevron_right</i>
                    </a>
                  </div>
                </div>
              </div>
              <div class="col-lg-7 col-md-6 mb-5">
                <div class="card card-raised bg-primary bg-gradient text-white h-100">
                  <div class="card-body p-5">
                    <div class="text-center">
                      <h3 class="text-white">{{year}}년도 월별 총 매출액</h3>
                      {% comment %} <h2 class="text-white mb-2" id="total_sales">{{total_sales}}</h2> {% endcomment %}
                      <div class="d-flex align-items-center justify-content-center text-white-50">
                        <i class="material-icons icon-sm me-1" id="icon">trending_up</i>
                        <div class="d-inline-block small mx-1" id="date"></div>
                        <div class="d-inline-block small mx-2" id="date2"></div>
                      </div>
                    </div>
                  </div>
                  <div class="px-1">
                    <canvas id="dashboardAreaChartLight"></canvas>
                  </div>
                </div>
              </div>
            </div>
            <div class="row gx-5">
              <div class="col-md-6 mb-5">
                <div class="card card-raised border-top border-4 border-secondary h-100">
                  <div class="card-body p-5">
                    <div class="overline text-muted mb-4">Money Out Last 30 Days</div>
                    <h2 class="mb-4">
                      <sup>$</sup>
                      -10,800
                      <sup>.22</sup>
                    </h2>
                    <div class="mb-2">
                      <div class="mb-1">Roger Henn</div>
                      <div class="d-flex align-items-center">
                        <div class="progress w-100 me-3" style="height: 0.25rem">
                          <div class="progress-bar bg-secondary" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <div class="flex-shrink-0">$5K</div>
                      </div>
                    </div>
                    <div class="mb-2">
                      <div class="mb-1">Caroline McLean</div>
                      <div class="d-flex align-items-center">
                        <div class="progress w-100 me-3" style="height: 0.25rem">
                          <div class="progress-bar bg-secondary" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <div class="flex-shrink-0">$5K</div>
                      </div>
                    </div>
                    <div class="mb-0">
                      <div class="mb-1">PayPal</div>
                      <div class="d-flex align-items-center">
                        <div class="progress w-100 me-3" style="height: 0.25rem">
                          <div class="progress-bar bg-secondary" role="progressbar" style="width: 1%" aria-valuenow="1" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <div class="flex-shrink-0">$0.22</div>
                      </div>
                    </div>
                  </div>
                  <div class="card-footer bg-transparent position-relative ripple-gray">
                    <a class="d-flex align-items-center justify-content-end text-decoration-none stretched-link text-primary" href="#!">
                      <div class="fst-button">View All</div>
                      <i class="material-icons icon-sm ms-1">chevron_right</i>
                    </a>
                  </div>
                </div>
              </div>
              <div class="col-md-6 mb-5">
                <div class="card card-raised border-top border-4 border-success h-100">
                  <div class="card-body p-5">
                    <div class="overline text-muted mb-4">Money In Last 30 Days</div>
                    <h2 class="mb-4">
                      <sup>$</sup>
                      11,532
                      <sup>.78</sup>
                    </h2>
                    <div class="mb-2">
                      <div class="mb-1">Bank Transfer</div>
                      <div class="d-flex align-items-center">
                        <div class="progress w-100 me-3" style="height: 0.25rem">
                          <div class="progress-bar bg-success" role="progressbar" style="width: 75%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <div class="flex-shrink-0">$11K</div>
                      </div>
                    </div>
                    <div class="mb-2">
                      <div class="mb-1">Stripe</div>
                      <div class="d-flex align-items-center">
                        <div class="progress w-100 me-3" style="height: 0.25rem">
                          <div class="progress-bar bg-success" role="progressbar" style="width: 5%" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <div class="flex-shrink-0">$459.66</div>
                      </div>
                    </div>
                    <div class="mb-2">
                      <div class="mb-1">PayPal</div>
                      <div class="d-flex align-items-center">
                        <div class="progress w-100 me-3" style="height: 0.25rem">
                          <div class="progress-bar bg-success" role="progressbar" style="width: 1%" aria-valuenow="1" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <div class="flex-shrink-0">$0.22</div>
                      </div>
                    </div>
                    <div class="mb-0">
                      <div class="mb-1">Other</div>
                      <div class="d-flex align-items-center">
                        <div class="progress w-100 me-3" style="height: 0.25rem">
                          <div class="progress-bar bg-success" role="progressbar" style="width: 1%" aria-valuenow="1" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <div class="flex-shrink-0">$0.81</div>
                      </div>
                    </div>
                  </div>
                  <div class="card-footer bg-transparent position-relative ripple-gray">
                    <a class="d-flex align-items-center justify-content-end text-decoration-none stretched-link text-primary" href="#!">
                      <div class="fst-button">View All</div>
                      <i class="material-icons icon-sm ms-1">chevron_right</i>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </main>
        <!-- Footer-->
        <!-- Min-height is set inline to match the height of the drawer footer-->
        {% include "footer.html" %}
      </div>
    </div>
    <form action="{% url "common:logout" %}" method="post" id="logoutForm">
      {% csrf_token %}
    </form>

    <input type="hidden" data-countyear="{{count_year}}" name="" value="{{year}}" id="year_array">
    <input type="hidden" name="" value="{{total_sales_sum_per_year}}" id="year_data">
    <input type="hidden" data-countmonth="{{count_month}}" name="" value="{{latest_year_months}}" id="month_array">
    <input type="hidden" name="" value="{{latest_year_months_data}}" id="month_data">

    <input type="hidden" name="" value="{{latest_month_per_year_data}}" id="latest_month_data">
    <!-- Load Bootstrap JS bundle-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <!-- Load global scripts-->
    <script type="module" src="{% static "js/material.js" %}"></script>
    <script src="{% static "js/scripts.js" %}"></script>
    <script src="{% static "js/base.js" %}"></script>
    <script src="{% static "js/home.js" %}"></script>
    <!-- Load Chart.js via CDN-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.0.2/chart.min.js" crossorigin="anonymous"></script>
    <!-- Load Chart.js customized defaults-->
    <script src="{% static "js/charts/chart-defaults.js" %}"></script>
    <!-- Load chart demos for this page-->
    <script src="{% static "js/charts/demos/dashboard-chart-area-light-demo.js" %}"></script>
    {% block script %}{% endblock script %}
  </body>
{% endblock content %}
